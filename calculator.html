<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GreenBite - Calculator</title>
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./styles/styles.css">
  <link rel="manifest" href="./json/manifest.json">
  <link rel="icon" type="image/x-icon" href="./favicon_io/favicon.ico">
</head>
<body>
  <header>
    <nav class="navbar">
      <div class="nav-container">
        <a href="./index.html" class="logo">
        <img src="./images/logo.png" alt="GreenBite Logo" id="logo"></a>
        <ul class="nav-menu">
          <li><a href="./index.html">Home</a></li>
          <li><a href="./recipes.html">Recipes</a></li>
          <li><a href="./calculator.html">Calculator</a></li>
          <li><a href="./workout.html">Workout</a></li>
          <li><a href="./mindfulness.html">Mindfulness</a></li>
          <li><a href="./contact.html">Contact</a></li>
        </ul>
        <div class="hamburger">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
    </nav>
  </header>
  <main>
    <section class="calculator reveal"> // Calculator Section
      <h1>Calorie & Nutrition Calculator</h1>
      <form id="calcForm">
        <label>Age (years): <input type="number" id="age" min="1" max="120" required></label>
        <label>Gender:
          <select id="gender">
            <option value="Male">Male</option>
            <option value="Female">Female</option>
          </select>
        </label> // Gender selection
        <label>Height (cm): <input type="number" id="height" min="100" max="250" required></label>
        <label>Weight (kg): <input type="number" id="weight" min="30" max="300" step="0.1" required></label>
        <label>Activity Level:
          <select id="activity">
            <option value="1.2">Sedentary (little/no exercise)</option>
            <option value="1.375">Lightly active (1-3 days/week)</option>
            <option value="1.55">Moderately active (3-5 days/week)</option>
            <option value="1.725">Very active (6-7 days/week)</option>
            <option value="1.9">Super active (very hard exercise/job)</option>
          </select>
        </label> // Activity level selection
        <button type="submit">Calculate</button>
      </form>
      <div id="results" class="reveal"></div>
    </section>
  </main>
  <footer>
    <div class="footer-container">
      <div class="newsletter">
        <input type="email" placeholder="Subscribe to newsletter" id="emailSub">
        <button onclick="subscribeNewsletter()">Subscribe</button>
      </div>
      <ul class="footer-links">
        <li><a href="./index.html">Home</a></li>
        <li><a href="./contact.html">Contact</a></li>
      </ul>
      <p>&copy; 2025 GreenBite. All rights reserved.</p>
    </div>
  </footer>
  <script src="./script/script.js"></script>
  <script>
    document.getElementById('calcForm').addEventListener('submit', e => { // Calculator form submission
      e.preventDefault();
      const age = parseFloat(document.getElementById('age').value);
      const gender = document.getElementById('gender').value;
      const height = parseFloat(document.getElementById('height').value);
      const weight = parseFloat(document.getElementById('weight').value);
      const factor = parseFloat(document.getElementById('activity').value);

      let bmr;
      if (gender === 'Male') {
        bmr = 10 * weight + 6.25 * height - 5 * age + 5;
      } else {
        bmr = 10 * weight + 6.25 * height - 5 * age - 161;
      }
      const tdee = bmr * factor;
      const carbs = (tdee * 0.50) / 4;
      const prot = (tdee * 0.20) / 4;
      const fat = (tdee * 0.30) / 9;

      document.getElementById('results').innerHTML = `
        <h2>Your Daily Needs</h2>
        <p><strong>BMR:</strong> ${Math.round(bmr)} kcal (calories at rest)</p>
        <p><strong>TDEE:</strong> ${Math.round(tdee)} kcal (total daily calories)</p>
        <h3>Macronutrient Breakdown (50% Carbs, 20% Protein, 30% Fat)</h3>
        <div class="progress-bar reveal">
          <label>Carbs: ${Math.round(carbs)}g <span style="float:right;">50%</span></label>
          <div class="bar"><div class="fill" style="width:50%; animation: countUp 1s;"></div></div>
        </div>
        <div class="progress-bar reveal">
          <label>Protein: ${Math.round(prot)}g <span style="float:right;">20%</span></label>
          <div class="bar"><div class="fill" style="width:20%; animation: countUp 1s;"></div></div>
        </div>
        <div class="progress-bar reveal">
          <label>Fat: ${Math.round(fat)}g <span style="float:right;">30%</span></label>
          <div class="bar"><div class="fill" style="width:30%; animation: countUp 1s;"></div></div>
        </div>
      `;
    }); // End of form submission handler
  </script>
</body>
</html>